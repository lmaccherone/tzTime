var require=function(e,t){var r=require.resolve(e,t||"/"),n=require.modules[r];if(!n)throw Error("Failed to resolve module "+e+", tried "+r);var i=require.cache[r],a=i?i.exports:n();return a};require.paths=[],require.modules={},require.cache={},require.extensions=[".js",".coffee",".json"],require._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},require.resolve=function(){return function(e,t){function r(e){if(e=o.normalize(e),require.modules[e])return e;for(var t=0;require.extensions.length>t;t++){var r=require.extensions[t];if(require.modules[e+r])return e+r}}function n(e){e=e.replace(/\/+$/,"");var t=o.normalize(e+"/package.json");if(require.modules[t]){var n=require.modules[t](),i=n.browserify;if("object"==typeof i&&i.main){var a=r(o.resolve(e,i.main));if(a)return a}else if("string"==typeof i){var a=r(o.resolve(e,i));if(a)return a}else if(n.main){var a=r(o.resolve(e,n.main));if(a)return a}}return r(e+"/index")}function i(e,t){for(var i=a(t),o=0;i.length>o;o++){var s=i[o],u=r(s+"/"+e);if(u)return u;var l=n(s+"/"+e);if(l)return l}var u=r(e);return u?u:void 0}function a(e){var t;t="/"===e?[""]:o.normalize(e).split("/");for(var r=[],n=t.length-1;n>=0;n--)if("node_modules"!==t[n]){var i=t.slice(0,n+1).join("/")+"/node_modules";r.push(i)}return r}if(t||(t="/"),require._core[e])return e;var o=require.modules.path();t=o.resolve("/",t);var s=t||"/";if(e.match(/^(?:\.\.?\/|\/)/)){var u=r(o.resolve(s,e))||n(o.resolve(s,e));if(u)return u}var l=i(e,s);if(l)return l;throw Error("Cannot find module '"+e+"'")}}(),require.alias=function(e,t){var r=require.modules.path(),n=null;try{n=require.resolve(e+"/package.json","/")}catch(i){n=require.resolve(e,"/")}for(var a=r.dirname(n),o=(Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t})(require.modules),s=0;o.length>s;s++){var u=o[s];if(u.slice(0,a.length+1)===a+"/"){var l=u.slice(a.length);require.modules[t+l]=require.modules[a+l]}else u===a&&(require.modules[t]=require.modules[a])}},function(){var e={},t="undefined"!=typeof window?window:{},r=!1;require.define=function(n,i){!r&&require.modules.__browserify_process&&(e=require.modules.__browserify_process(),r=!0);var a=require._core[n]?"":require.modules.path().dirname(n),o=function(e){var t=require(e,a),r=require.cache[require.resolve(e,a)];return r&&null===r.parent&&(r.parent=s),t};o.resolve=function(e){return require.resolve(e,a)},o.modules=require.modules,o.define=require.define,o.cache=require.cache;var s={id:n,filename:n,exports:{},loaded:!1,parent:null};require.modules[n]=function(){return require.cache[n]=s,i.call(s.exports,o,s,s.exports,a,n,e,t),s.loaded=!0,s.exports}}}(),require.define("path",function(e,t,r,n,i,a){function o(e,t){for(var r=[],n=0;e.length>n;n++)t(e[n],n,e)&&r.push(e[n]);return r}function s(e,t){for(var r=0,n=e.length;n>=0;n--){var i=e[n];"."==i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}var u=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;r.resolve=function(){for(var e="",t=!1,r=arguments.length;r>=-1&&!t;r--){var n=r>=0?arguments[r]:a.cwd();"string"==typeof n&&n&&(e=n+"/"+e,t="/"===n.charAt(0))}return e=s(o(e.split("/"),function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},r.normalize=function(e){var t="/"===e.charAt(0),r="/"===e.slice(-1);return e=s(o(e.split("/"),function(e){return!!e}),!t).join("/"),e||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(o(e,function(e){return e&&"string"==typeof e}).join("/"))},r.dirname=function(e){var t=u.exec(e)[1]||"",r=!1;return t?1===t.length||r&&3>=t.length&&":"===t.charAt(1)?t:t.substring(0,t.length-1):"."},r.basename=function(e,t){var r=u.exec(e)[2]||"";return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){return u.exec(e)[3]||""}}),require.define("__browserify_process",function(e,t,r,n,i,a){var a=t.exports={};a.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var r=[];return window.addEventListener("message",function(e){if(e.source===window&&"browserify-tick"===e.data&&(e.stopPropagation(),r.length>0)){var t=r.shift();t()}},!0),function(e){r.push(e),window.postMessage("browserify-tick","*")}}return function(e){setTimeout(e,0)}}(),a.title="browser",a.browser=!0,a.env={},a.argv=[],a.binding=function(t){if("evals"===t)return e("vm");throw Error("No such module. (Possibly not yet loaded)")},function(){var t,r="/";a.cwd=function(){return r},a.chdir=function(n){t||(t=e("path")),r=t.resolve(n,r)}}()}),require.define("/package.json",function(e,t){t.exports={main:"./tzTime"}}),require.define("/tzTime.js",function(e,t,r){(function(){var t;r.Time=e("./src/Time").Time,t=e("./src/Timeline"),r.TimelineIterator=t.TimelineIterator,r.Timeline=t.Timeline,r.utils=e("./src/utils")}).call(this)}),require.define("/src/Time.js",function(e,t,r){(function(){var t,n,i,a=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e("./utils"),n=e("../lib/timezone-js.js").timezoneJS,t=function(){function e(t,r,n){var o,s,u,l,c,h,f,d,m,g,p,y,v;switch(this.beforePastFlag="",i.type(t)){case"string":if(y=t,":"===y.slice(-3,-2)&&(d=y.slice(-6,-5),a.call("+-",d)>=0)||"Z"===y.slice(-1)){if(null==n)throw Error("Must provide a tz parameter when instantiating a Time object with ISOString that contains timeshift/timezone specification. You provided: "+y+".");if(":"===y.slice(-3,-2)&&(m=y.slice(-6,-5),a.call("+-",m)>=0))throw Error("tzTime.Time does not know how to deal with time shifted ISOStrings like what you sent: "+y);"Z"===y.slice(-1)&&(y=y.slice(0,-1)),c=new e(y,"millisecond"),s=c.getJSDateFromGMTInTZ(n)}else this._setFromString(y,r),n=void 0;break;case"number":f=t,null!=n?(c=new e(f,"millisecond"),s=c.getJSDateFromGMTInTZ(n)):this._setFromRDN(f,r);break;case"date":s=t,null!=n&&(c=new e(s,"millisecond"),s=c.getJSDateFromGMTInTZ(n)),null==n&&(n="GMT");break;case"object":for(o={},o.granularity=t.granularity,o.beforePastFlag=t.beforePastFlag,g=e._granularitySpecs[t.granularity].segments,u=0,l=g.length;l>u;u++)v=g[u],o[v]=t[v];null!=n?(o.granularity="millisecond",c=new e(o),s=c.getJSDateFromGMTInTZ(n)):this._setFromConfig(o)}if(null!=n){if("BEFORE_FIRST"===(p=this.beforePastFlag)||"PAST_LAST"===p)throw Error("Cannot do timezone manipulation on "+this.beforePastFlag);null!=r&&(this.granularity=r),null==this.granularity&&(this.granularity="millisecond"),h={year:s.getUTCFullYear(),month:s.getUTCMonth()+1,day:s.getUTCDate(),hour:s.getUTCHours(),minute:s.getUTCMinutes(),second:s.getUTCSeconds(),millisecond:s.getUTCMilliseconds(),granularity:"millisecond"},c=new e(h).inGranularity(this.granularity),this._setFromConfig(c)}this._inBoundsCheck(),this._overUnderFlow()}var t,r,o;e._granularitySpecs={},e._granularitySpecs.millisecond={segments:["year","month","day","hour","minute","second","millisecond"],mask:"####-##-##T##:##:##.###",lowest:0,rolloverValue:function(){return 1e3}},e._granularitySpecs.second={segments:["year","month","day","hour","minute","second"],mask:"####-##-##T##:##:##",lowest:0,rolloverValue:function(){return 60}},e._granularitySpecs.minute={segments:["year","month","day","hour","minute"],mask:"####-##-##T##:##",lowest:0,rolloverValue:function(){return 60}},e._granularitySpecs.hour={segments:["year","month","day","hour"],mask:"####-##-##T##",lowest:0,rolloverValue:function(){return 24}},e._granularitySpecs.day={segments:["year","month","day"],mask:"####-##-##",lowest:1,rolloverValue:function(e){return e.daysInMonth()+1}},e._granularitySpecs.month={segments:["year","month"],mask:"####-##",lowest:1,rolloverValue:function(){return 13}},e._granularitySpecs.year={segments:["year"],mask:"####",lowest:1,rolloverValue:function(){return 1e4}},e._granularitySpecs.week={segments:["year","week"],mask:"####W##",lowest:1,rolloverValue:function(e){return e.is53WeekYear()?54:53}},e._granularitySpecs.week_day={segments:["year","week","week_day"],mask:"####W##-#",lowest:1,rolloverValue:function(){return 8}},e._granularitySpecs.quarter={segments:["year","quarter"],mask:"####Q#",lowest:1,rolloverValue:function(){return 5}},e._expandMask=function(e){var t,r,n,i;if(n=e.mask,null!=n){if(n.indexOf("#")>=0){for(r=n.length-1;"#"!==n.charAt(r);)r--;for(i=r;"#"===n.charAt(r);)r--;return e.segmentStart=r+1,e.segmentLength=i-r,e.regex=RegExp(function(){var e,r,i,a;for(i=n.split(""),a=[],e=0,r=i.length;r>e;e++)t=i[e],a.push("#"===t?"\\d":t);return a}().join(""))}return e.regex=RegExp(n)}},r=e._granularitySpecs;for(t in r)o=r[t],e._expandMask(o),e[t.toUpperCase()]=t;return n.timezone.zoneFileBasePath="../files/tz",n.timezone.init(),e.prototype._inBoundsCheck=function(){var t,r,n,i,a,o,s,u,l;if(""===this.beforePastFlag||null==this.beforePastFlag){if(!this.granularity)throw Error("@granularity should be set before _inBoundsCheck is ever called.");for(u=e._granularitySpecs[this.granularity].segments,a=[],r=0,n=u.length;n>r;r++)if(s=u[r],t=e._granularitySpecs[s],l=this[s],i=t.lowest,o=t.rolloverValue(this),i>l||l>=o)if(l===i-1)this[s]++,a.push(this.decrement(s));else{if(l!==o)throw Error("Tried to set "+s+" to "+l+". It must be >= "+i+" and < "+o);this[s]--,a.push(this.increment(s))}else a.push(void 0);return a}},e.prototype._setFromConfig=function(t){var r,n,a,o,s;for(i.assert(null!=t.granularity,"A granularity property must be part of the supplied config."),this.granularity=t.granularity,this.beforePastFlag=null!=t.beforePastFlag?t.beforePastFlag:"",s=e._granularitySpecs[this.granularity].segments,a=[],r=0,n=s.length;n>r;r++)o=s[r],null!=t[o]?a.push(this[o]=t[o]):a.push(this[o]=e._granularitySpecs[o].lowest);return a},e.prototype._setFromString=function(r,n){var i,a,s,u,l,c,h,f,d,m,g,p,y,v;if("PAST_LAST"===r||"BEFORE_FIRST"===r){if(null!=n)return this.granularity=n,this.beforePastFlag=r,void 0;throw Error("PAST_LAST/BEFORE_FIRST must have a granularity")}if(f=r.split(" "),"this"===(l=f[0])||"next"===l||"previous"===l)return y="in"===f[2]&&null!=f[3]?f[3]:void 0,v=new e(new Date,f[1],y),this._setFromConfig(v),"next"===f[0]?this.increment():"previous"===f[0]&&this.decrement(),void 0;c=e._granularitySpecs;for(t in c)if(o=c[t],(o.segmentStart+o.segmentLength===r.length||0>o.mask.indexOf("#"))&&o.regex.test(r)){n=t;break}if(null==n)throw Error("Error parsing string '"+r+"'. Couldn't identify granularity.");for(this.granularity=n,m=e._granularitySpecs[this.granularity].segments,g=!0,h=[],a=0,u=m.length;u>a;a++)d=m[a],g&&(i=e._granularitySpecs[d],s=i.segmentLength,p=e._getStringPart(r,d),p.length!==s&&(g=!1)),g?h.push(this[d]=Number(p)):h.push(this[d]=e._granularitySpecs[d].lowest);return h},e._getStringPart=function(t,r){var n,i,a;return o=e._granularitySpecs[r],n=o.segmentLength,i=o.segmentStart,a=t.substr(i,n)},e.prototype._setFromRDN=function(r,n){var a,o,s,u,l,c,h,f,d,m,g,p,y,v,_,w,S,T,b,A,F,O,k,E,D,z,M;switch(d={granularity:n},i.assert(null!=n,"Must provide a granularity when constructing with a Rata Die Number."),n){case"week":case"week_day":return E=Math.floor((r-1)/7),m=(r-1)%7,A=Math.floor(E/20871),E%=20871,M=E+(E>=10435?1:0),f=Math.floor(M/5218),E=M%5218,D=28*E+[15,23,3,11][f],z=Math.floor(D/1461),E=D%1461,d.year=z+400*A+100*f+1,d.week=Math.floor(E/28)+1,d.week_day=m+1,this._setFromConfig(d);case"year":case"month":case"day":case"hour":case"minute":case"second":case"millisecond":case"quarter":return a=r+1721425,w=a+32044,t=Math.floor(w/146097),v=w%146097,f=Math.floor(3*(Math.floor(v/36524)+1)/4),y=v-36524*f,l=Math.floor(y/1461),p=y%1461,o=Math.floor(3*(Math.floor(p/365)+1)/4),g=p-365*o,z=400*t+100*f+4*l+o,b=Math.floor((5*g+308)/153)-2,m=g-Math.floor(153*(b+4)/5)+122,d.year=z-4800+Math.floor((b+2)/12),d.month=(b+2)%12+1,d.day=Math.floor(m)+1,d.quarter=Math.floor((d.month-1)/3)+1,this._setFromConfig(d);default:for(_=e._granularitySpecs[n],k={granularity:n},F=_.segments,S=0,T=F.length;T>S;S++)O=F[S],k[O]=e._granularitySpecs[O].lowest;if(c=new e(k),h=c.rataDieNumber(),s=c.add(1),u=s.rataDieNumber(),h>r)return this.beforePastFlag="BEFORE_FIRST",void 0;for(;;){if(u>r&&r>=h)return this._setFromConfig(c),void 0;if(c=s,h=u,s=c.add(1),u=s.rataDieNumber(),"PAST_LAST"===s.beforePastFlag){if(r>=e._granularitySpecs[c.granularity].endBeforeDay.rataDieNumber())return this._setFromConfig(s),"PAST_LAST"===this.beforePastFlag,void 0;if(r>=h)return this._setFromConfig(c),void 0;throw Error("RDN: "+r+" seems to be out of range for "+n)}}throw Error("Something went badly wrong setting custom granularity "+n+" for RDN: "+r)}},e.prototype._isGranularityCoarserThanDay=function(){var t,r,n,i;for(n=e._granularitySpecs[this.granularity].segments,t=0,r=n.length;r>t;t++)if(i=n[t],i.indexOf("day")>=0)return!1;return!0},e.prototype.getJSDate=function(e){var t,r,a,o;return"PAST_LAST"===this.beforePastFlag?new Date(9999,0,1):"BEFORE_FIRST"===this.beforePastFlag?new Date("0001-01-01"):(i.assert(null!=e,"Must provide a timezone when calling getJSDate"),t=this.inGranularity("millisecond"),o=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a=n.timezone.getTzInfo(new Date(o),e).tzOffset,o+=60*1e3*a,r=new Date(o))},e.prototype.getISOStringInTZ=function(t){var r;return i.assert(null!=t,"Must provide a timezone when calling getShiftedISOString"),r=this.getJSDate(t),e.getISOStringFromJSDate(r)},e.getISOStringFromJSDate=function(t){var r,n,i,a,o,s,u,l;return null==t&&(t=new Date),l=t.getUTCFullYear(),o=t.getUTCMonth()+1,r=t.getUTCDate(),n=t.getUTCHours(),a=t.getUTCMinutes(),u=t.getUTCSeconds(),i=t.getUTCMilliseconds(),s=e._pad(l,4)+"-"+e._pad(o,2)+"-"+e._pad(r,2)+"T"+e._pad(n,2)+":"+e._pad(a,2)+":"+e._pad(u,2)+"."+e._pad(i,3)+"Z"},e.prototype.getJSDateFromGMTInTZ=function(e){var t,r,a,o;return"PAST_LAST"===this.beforePastFlag?new Date(9999,0,1):"BEFORE_FIRST"===this.beforePastFlag?new Date("0001-01-01"):(i.assert(null!=e,"Must provide a timezone when calling getJSDate"),t=this.inGranularity("millisecond"),o=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a=n.timezone.getTzInfo(new Date(o),e).tzOffset,o-=60*1e3*a,r=new Date(o))},e.prototype.getSegmentsAsObject=function(){var t,r,n,i,a;for(a=e._granularitySpecs[this.granularity].segments,n={},t=0,r=a.length;r>t;t++)i=a[t],n[i]=this[i];return n},e.prototype.getSegmentsAsArray=function(){var t,r,n,i,a;for(a=e._granularitySpecs[this.granularity].segments,t=[],r=0,n=a.length;n>r;r++)i=a[r],t.push(this[i]);return t},e.prototype.toString=function(){var t,r,n,i,a,o,s,u,l,c,h;if("BEFORE_FIRST"===(s=this.beforePastFlag)||"PAST_LAST"===s)u=""+this.beforePastFlag;else for(u=e._granularitySpecs[this.granularity].mask,c=e._granularitySpecs[this.granularity].segments,i=0,o=c.length;o>i;i++)l=c[i],n=e._granularitySpecs[l],a=n.segmentLength,h=n.segmentStart,r=u.slice(0,h),t=u.slice(h+a),u=r+e._pad(this[l],a)+t;return u},e._pad=function(e,t){var r;for(r=""+e;t>r.length;)r="0"+r;return r},e.DOW_N_TO_S_MAP={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday",7:"Sunday"},e.MONTH_TO_S_MAP={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},e.DOW_MONTH_TABLE=[0,3,2,5,0,3,5,1,4,6,2,4],e.prototype.dowNumber=function(){var t,r,n;return"week_day"===this.granularity?this.week_day:"day"===(r=this.granularity)||"hour"===r||"minute"===r||"second"===r||"millisecond"===r?(n=this.year,3>this.month&&n--,t=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400)+e.DOW_MONTH_TABLE[this.month-1]+this.day)%7,0===t?7:t):this.inGranularity("day").dowNumber()},e.prototype.dowString=function(){return e.DOW_N_TO_S_MAP[this.dowNumber()]},e.prototype.monthString=function(){return e.MONTH_TO_S_MAP[this.month]},e.prototype.rataDieNumber=function(){var t,r,n,a;if("BEFORE_FIRST"===this.beforePastFlag)return-1;if("PAST_LAST"===this.beforePastFlag)return i.MAX_INT;if(null!=e._granularitySpecs[this.granularity].rataDieNumber)return e._granularitySpecs[this.granularity].rataDieNumber(this);switch(n=this.year-1,a=365*n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400),t=Math.floor((a+3)/7),null!=this.month?(r=[0,31,59,90,120,151,181,212,243,273,304,334][this.month-1],this.isLeapYear()&&this.month>=3&&r++):null!=this.quarter?(r=[0,90,181,273][this.quarter-1],this.isLeapYear()&&this.quarter>=2&&r++):r=0,this.granularity){case"year":return a+1;case"month":case"quarter":return a+r+1;case"day":case"hour":case"minute":case"second":case"millisecond":return a+r+this.day;case"week":return 7*(t+this.week-1)+1;case"week_day":return 7*(t+this.week-1)+this.week_day}},e.prototype.inGranularity=function(t){var r,n,i;return"year"!==(n=this.granularity)&&"month"!==n&&"day"!==n&&"hour"!==n&&"minute"!==n&&"second"!==n&&"millisecond"!==n||"year"!==t&&"month"!==t&&"day"!==t&&"hour"!==t&&"minute"!==t&&"second"!==t&&"millisecond"!==t?new e(this.rataDieNumber(),t):(i=this.granularity,this.granularity=t,r=new e(this),this.granularity=i,r)},e.prototype.daysInMonth=function(){switch(this.month){case 4:case 6:case 9:case 11:return 30;case 1:case 3:case 5:case 7:case 8:case 10:case 12:case 0:return 31;case 2:return this.isLeapYear()?29:28}},e.prototype.isLeapYear=function(){return 0===this.year%4?0===this.year%100?0===this.year%400?!0:!1:!0:!1},e.YEARS_WITH_53_WEEKS=[4,9,15,20,26,32,37,43,48,54,60,65,71,76,82,88,93,99,105,111,116,122,128,133,139,144,150,156,161,167,172,178,184,189,195,201,207,212,218,224,229,235,240,246,252,257,263,268,274,280,285,291,296,303,308,314,320,325,331,336,342,348,353,359,364,370,376,381,387,392,398],e.prototype.is53WeekYear=function(){var t;return t=this.year%400,a.call(e.YEARS_WITH_53_WEEKS,t)>=0},e.prototype.equal=function(t){var r,n,a,o;if(i.assert(this.granularity===t.granularity,"Granulary of "+this+" does not match granularity of "+t+" on equality/inequality test"),"PAST_LAST"===this.beforePastFlag&&"PAST_LAST"===t.beforePastFlag)return!0;if("BEFORE_FIRST"===this.beforePastFlag&&"BEFORE_FIRST"===t.beforePastFlag)return!0;if("PAST_LAST"===this.beforePastFlag&&"PAST_LAST"!==t.beforePastFlag)return!1;if("BEFORE_FIRST"===this.beforePastFlag&&"BEFORE_FIRST"!==t.beforePastFlag)return!1;if("PAST_LAST"===t.beforePastFlag&&"PAST_LAST"!==this.beforePastFlag)return!1;if("BEFORE_FIRST"===t.beforePastFlag&&"BEFORE_FIRST"!==this.beforePastFlag)return!1;for(o=e._granularitySpecs[this.granularity].segments,r=0,n=o.length;n>r;r++)if(a=o[r],this[a]!==t[a])return!1;return!0},e.prototype.greaterThan=function(t){var r,n,a,o;if(i.assert(this.granularity===t.granularity,"Granulary of "+this+" does not match granularity of "+t+" on equality/inequality test"),"PAST_LAST"===this.beforePastFlag&&"PAST_LAST"===t.beforePastFlag)return!1;if("BEFORE_FIRST"===this.beforePastFlag&&"BEFORE_FIRST"===t.beforePastFlag)return!1;if("PAST_LAST"===this.beforePastFlag&&"PAST_LAST"!==t.beforePastFlag)return!0;if("BEFORE_FIRST"===this.beforePastFlag&&"BEFORE_FIRST"!==t.beforePastFlag)return!1;if("PAST_LAST"===t.beforePastFlag&&"PAST_LAST"!==this.beforePastFlag)return!1;if("BEFORE_FIRST"===t.beforePastFlag&&"BEFORE_FIRST"!==this.beforePastFlag)return!0;for(o=e._granularitySpecs[this.granularity].segments,r=0,n=o.length;n>r;r++){if(a=o[r],this[a]>t[a])return!0;if(this[a]<t[a])return!1}return!1},e.prototype.greaterThanOrEqual=function(e){var t;return t=this.greaterThan(e),t?!0:this.equal(e)},e.prototype.lessThan=function(e){return e.greaterThan(this)},e.prototype.lessThanOrEqual=function(e){return e.greaterThanOrEqual(this)},e.prototype._overUnderFlow=function(){var t,r,n,i,a,o,s;return"BEFORE_FIRST"===(a=this.beforePastFlag)||"PAST_LAST"===a?!0:(t=e._granularitySpecs[this.granularity],r=t.segments[0],n=e._granularitySpecs[r],s=this[r],o=n.rolloverValue(this),i=n.lowest,s>=o?(this.beforePastFlag="PAST_LAST",!0):i>s?(this.beforePastFlag="BEFORE_FIRST",!0):!1)},e.prototype.decrement=function(t){var r,n,i,a,o,s,u,l,c;if("PAST_LAST"===this.beforePastFlag){for(this.beforePastFlag="",r=e._granularitySpecs[this.granularity],c=r.segments,u=[],a=0,s=c.length;s>a;a++)l=c[a],n=e._granularitySpecs[l],u.push(this[l]=n.rolloverValue(this)-1);return u}if(o=this.day===this.daysInMonth(),null==t&&(t=this.granularity),r=e._granularitySpecs[t],c=r.segments,this[t]--,"year"===t)this.day>this.daysInMonth()&&(this.day=this.daysInMonth());else{for(i=c.length-1,l=c[i],r=e._granularitySpecs[l];i>0&&this[l]<r.lowest;)this[c[i-1]]--,this[l]=r.rolloverValue(this)-1,i--,l=c[i],r=e._granularitySpecs[l];"month"===t&&"month"!==this.granularity&&(o||this.day>this.daysInMonth())&&(this.day=this.daysInMonth())}return this._overUnderFlow(),this},e.prototype.increment=function(t){var r,n,i,a,o,s,u,l,c;if("BEFORE_FIRST"===this.beforePastFlag){for(this.beforePastFlag="",r=e._granularitySpecs[this.granularity],c=r.segments,u=[],a=0,s=c.length;s>a;a++)l=c[a],n=e._granularitySpecs[l],u.push(this[l]=n.lowest);return u}if(o=this.day===this.daysInMonth(),null==t&&(t=this.granularity),r=e._granularitySpecs[t],c=r.segments,this[t]++,"year"===t)this.day>this.daysInMonth()&&(this.day=this.daysInMonth());else{for(i=c.length-1,l=c[i],r=e._granularitySpecs[l];i>0&&this[l]>=r.rolloverValue(this);)this[l]=r.lowest,this[c[i-1]]++,i--,l=c[i],r=e._granularitySpecs[l];"month"===t&&"month"!==this.granularity&&(o||this.day>this.daysInMonth())&&(this.day=this.daysInMonth())}return this._overUnderFlow(),this},e.prototype.addInPlace=function(e,t){return null==t&&(t=this.granularity),0===e?this:(1===e?this.increment(t):e>1?(this.increment(t),this.addInPlace(e-1,t)):-1===e?this.decrement(t):(this.decrement(t),this.addInPlace(e+1,t)),this)},e.prototype.add=function(t,r){var n;return n=new e(this),n.addInPlace(t,r),n},e.addGranularity=function(r){var n;n=[];for(t in r)o=r[t],e._expandMask(o),this._granularitySpecs[t]=o,n.push(e[t.toUpperCase()]=t);return n},e}(),r.Time=t}).call(this)}),require.define("/src/utils.js",function(e,t,r){(function(){var t,n,i,a,o,s,u,l,c,h,f,d,m,g,p,y,v,_,w,S=function(e,t){function r(){this.constructor=e}for(var n in t)T.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},T={}.hasOwnProperty;r.MAX_INT=2147483647,r.MIN_INT=-2147483648,n=function(e){function t(e){this.message=null!=e?e:"Unknown error.",null!=Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}return S(t,e),t.prototype.toString=function(){return this.name+": "+this.message},t}(Error),t=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return S(t,e),t}(n),i=function(e,t){if(!e)throw new r.AssertException(t)},p=function(e,t){var r,n;for(r in e)if(n=e[r],n!==t[r])return!1;return!0},l=function(e,t){var r,n,i,a;if(e===t)return!0;if(r=typeof e,n=typeof t,r!==n)return!1;if(!e&&t||e&&!t)return!1;if("object"!==r)return!1;if(e.length&&e.length!==t.length)return!1;for(i in e)if(a=e[i],!(i in t&&l(a,t[i])))return!1;return!0},c=function(e,t){var r,n;if("object"!==_(e)||"object"!==_(t))throw Error("obj1 and obj2 must both be objects when calling filterMatch");for(r in e)if(n=e[r],!l(n,t[r]))return!1;return!0},v=function(e){return null!=String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},y=function(e,t){return e.substring(0,t.length)===t},h=function(e){return"[object Array]"===Object.prototype.toString.apply(e)},_=function(){var e,t,r,n,i;for(e={},i="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),t=0,r=i.length;r>t;t++)n=i[t],e["[object "+n+"]"]=n.toLowerCase();return function(t){var r;return r=Object.prototype.toString.call(t),e[r]||"object"}}(),a=function(e){var t,r,n;if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return t="",null!=e.global&&(t+="g"),null!=e.ignoreCase&&(t+="i"),null!=e.multiline&&(t+="m"),null!=e.sticky&&(t+="y"),RegExp(e.source,t);n=new e.constructor;for(r in e)n[r]=a(e[r]);return n},f=Object.keys||function(e){var t,r;return function(){var n;n=[];for(t in e)r=e[t],n.push(t);return n}()},w=function(e){var t,r;return function(){var n;n=[];for(t in e)r=e[t],n.push(r);return n}()},d=function(e){var t;return null!=("undefined"!=typeof document&&null!==document?document.createElement:void 0)?(t=document.createElement("pre"),t.innerHTML=e,document.body.appendChild(t)):console.log(e)},o=function(e,t){var r,n,i,a,o,s;if(null===e)return 1;if(null===t)return-1;switch(_(e)){case"number":case"boolean":case"date":return t-e;case"array":for(i=a=0,o=e.length;o>a;i=++a){if(s=e[i],t.length-1>=i&&t[i]>s)return 1;if(t.length-1>=i&&s>t[i])return-1}return e.length<t.length?1:e.length>t.length?-1:0;case"object":case"string":return r=JSON.stringify(e),n=JSON.stringify(t),n>r?1:r>n?-1:0;default:throw Error("Do not know how to sort objects of type "+utils.type(e)+".")}},u=function(e){return unescape(encodeURIComponent(e))},s=function(e){return decodeURIComponent(escape(e))},g=function(e){var t,r,n,i,a,o,s;for(e=u(e),i={},n=(e+"").split(""),o=[],r=void 0,s=n[0],t=256,a=1;n.length>a;)r=n[a],null!=i[s+r]?s+=r:(o.push(s.length>1?i[s]:s.charCodeAt(0)),i[s+r]=t,t++,s=r),a++;for(o.push(s.length>1?i[s]:s.charCodeAt(0)),a=0;o.length>a;)o[a]=String.fromCharCode(o[a]),a++;return o.join("")},m=function(e){var t,r,n,i,a,o,u,l,c,h;for(a={},i=(e+"").split(""),r=i[0],u=r,l=[r],t=256,h=void 0,o=1;i.length>o;)n=i[o].charCodeAt(0),h=256>n?i[o]:a[n]?a[n]:u+r,l.push(h),r=h.charAt(0),a[t]=u+r,t++,u=h,o++;return c=l.join(""),s(c)},r.log=d,r.AssertException=t,r.assert=i,r.match=p,r.filterMatch=c,r.trim=v,r.startsWith=y,r.isArray=h,r.type=_,r.clone=a,r.keys=f,r.values=w,r.compare=o,r.lzwEncode=g,r.lzwDecode=m,r._=e("underscore")}).call(this)}),require.define("/node_modules/underscore/package.json",function(e,t){t.exports={main:"underscore.js"}}),require.define("/node_modules/underscore/underscore.js",function(e,t,r){(function(){function e(e){function t(t,r,n,i,a,o){for(;a>=0&&o>a;a+=e){var s=i?i[a]:a;n=r(n,t[s],s,t)}return n}return function(r,n,i,a){n=S(n,a,4);var o=!E(r)&&w.keys(r),s=(o||r).length,u=e>0?0:s-1;return 3>arguments.length&&(i=r[o?o[u]:u],u+=e),t(r,n,i,o,u,s)}}function n(e){return function(t,r,n){r=T(r,n);for(var i=k(t),a=e>0?0:i-1;a>=0&&i>a;a+=e)if(r(t[a],a,t))return a;return-1}}function i(e,t,r){return function(n,i,a){var o=0,s=k(n);if("number"==typeof a)e>0?o=a>=0?a:Math.max(a+s,o):s=a>=0?Math.min(a+1,s):a+s+1;else if(r&&a&&s)return a=r(n,i),n[a]===i?a:-1;if(i!==i)return a=t(f.call(n,o,s),w.isNaN),a>=0?a+o:-1;for(a=e>0?o:s-1;a>=0&&s>a;a+=e)if(n[a]===i)return a;return-1}}function a(e,t){var r=x.length,n=e.constructor,i=w.isFunction(n)&&n.prototype||l,a="constructor";for(w.has(e,a)&&!w.contains(t,a)&&t.push(a);r--;)a=x[r],a in e&&e[a]!==i[a]&&!w.contains(t,a)&&t.push(a)}var o=this,s=o._,u=Array.prototype,l=Object.prototype,c=Function.prototype,h=u.push,f=u.slice,d=l.toString,m=l.hasOwnProperty,g=Array.isArray,p=Object.keys,y=c.bind,v=Object.create,_=function(){},w=function(e){return e instanceof w?e:this instanceof w?(this._wrapped=e,void 0):new w(e)};r!==void 0?(t!==void 0&&t.exports&&(r=t.exports=w),r._=w):o._=w,w.VERSION="1.8.3";var S=function(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,a){return e.call(t,r,n,i,a)}}return function(){return e.apply(t,arguments)}},T=function(e,t,r){return null==e?w.identity:w.isFunction(e)?S(e,t,r):w.isObject(e)?w.matcher(e):w.property(e)};w.iteratee=function(e,t){return T(e,t,1/0)};var b=function(e,t){return function(r){var n=arguments.length;if(2>n||null==r)return r;for(var i=1;n>i;i++)for(var a=arguments[i],o=e(a),s=o.length,u=0;s>u;u++){var l=o[u];t&&void 0!==r[l]||(r[l]=a[l])}return r}},A=function(e){if(!w.isObject(e))return{};if(v)return v(e);_.prototype=e;var t=new _;return _.prototype=null,t},F=function(e){return function(t){return null==t?void 0:t[e]}},O=Math.pow(2,53)-1,k=F("length"),E=function(e){var t=k(e);return"number"==typeof t&&t>=0&&O>=t};w.each=w.forEach=function(e,t,r){t=S(t,r);var n,i;if(E(e))for(n=0,i=e.length;i>n;n++)t(e[n],n,e);else{var a=w.keys(e);for(n=0,i=a.length;i>n;n++)t(e[a[n]],a[n],e)}return e},w.map=w.collect=function(e,t,r){t=T(t,r);for(var n=!E(e)&&w.keys(e),i=(n||e).length,a=Array(i),o=0;i>o;o++){var s=n?n[o]:o;a[o]=t(e[s],s,e)}return a},w.reduce=w.foldl=w.inject=e(1),w.reduceRight=w.foldr=e(-1),w.find=w.detect=function(e,t,r){var n;return n=E(e)?w.findIndex(e,t,r):w.findKey(e,t,r),void 0!==n&&-1!==n?e[n]:void 0},w.filter=w.select=function(e,t,r){var n=[];return t=T(t,r),w.each(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n},w.reject=function(e,t,r){return w.filter(e,w.negate(T(t)),r)},w.every=w.all=function(e,t,r){t=T(t,r);for(var n=!E(e)&&w.keys(e),i=(n||e).length,a=0;i>a;a++){var o=n?n[a]:a;if(!t(e[o],o,e))return!1}return!0},w.some=w.any=function(e,t,r){t=T(t,r);for(var n=!E(e)&&w.keys(e),i=(n||e).length,a=0;i>a;a++){var o=n?n[a]:a;if(t(e[o],o,e))return!0}return!1},w.contains=w.includes=w.include=function(e,t,r,n){return E(e)||(e=w.values(e)),("number"!=typeof r||n)&&(r=0),w.indexOf(e,t,r)>=0},w.invoke=function(e,t){var r=f.call(arguments,2),n=w.isFunction(t);return w.map(e,function(e){var i=n?t:e[t];return null==i?i:i.apply(e,r)})},w.pluck=function(e,t){return w.map(e,w.property(t))},w.where=function(e,t){return w.filter(e,w.matcher(t))},w.findWhere=function(e,t){return w.find(e,w.matcher(t))},w.max=function(e,t,r){var n,i,a=-1/0,o=-1/0;if(null==t&&null!=e){e=E(e)?e:w.values(e);for(var s=0,u=e.length;u>s;s++)n=e[s],n>a&&(a=n)}else t=T(t,r),w.each(e,function(e,r,n){i=t(e,r,n),(i>o||i===-1/0&&a===-1/0)&&(a=e,o=i)});return a},w.min=function(e,t,r){var n,i,a=1/0,o=1/0;if(null==t&&null!=e){e=E(e)?e:w.values(e);for(var s=0,u=e.length;u>s;s++)n=e[s],a>n&&(a=n)}else t=T(t,r),w.each(e,function(e,r,n){i=t(e,r,n),(o>i||1/0===i&&1/0===a)&&(a=e,o=i)});return a},w.shuffle=function(e){for(var t,r=E(e)?e:w.values(e),n=r.length,i=Array(n),a=0;n>a;a++)t=w.random(0,a),t!==a&&(i[a]=i[t]),i[t]=r[a];return i},w.sample=function(e,t,r){return null==t||r?(E(e)||(e=w.values(e)),e[w.random(e.length-1)]):w.shuffle(e).slice(0,Math.max(0,t))},w.sortBy=function(e,t,r){return t=T(t,r),w.pluck(w.map(e,function(e,r,n){return{value:e,index:r,criteria:t(e,r,n)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(n>r||void 0===n)return-1}return e.index-t.index}),"value")};var D=function(e){return function(t,r,n){var i={};return r=T(r,n),w.each(t,function(n,a){var o=r(n,a,t);e(i,n,o)}),i}};w.groupBy=D(function(e,t,r){w.has(e,r)?e[r].push(t):e[r]=[t]}),w.indexBy=D(function(e,t,r){e[r]=t}),w.countBy=D(function(e,t,r){w.has(e,r)?e[r]++:e[r]=1}),w.toArray=function(e){return e?w.isArray(e)?f.call(e):E(e)?w.map(e,w.identity):w.values(e):[]},w.size=function(e){return null==e?0:E(e)?e.length:w.keys(e).length},w.partition=function(e,t,r){t=T(t,r);var n=[],i=[];return w.each(e,function(e,r,a){(t(e,r,a)?n:i).push(e)}),[n,i]},w.first=w.head=w.take=function(e,t,r){return null==e?void 0:null==t||r?e[0]:w.initial(e,e.length-t)},w.initial=function(e,t,r){return f.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))},w.last=function(e,t,r){return null==e?void 0:null==t||r?e[e.length-1]:w.rest(e,Math.max(0,e.length-t))},w.rest=w.tail=w.drop=function(e,t,r){return f.call(e,null==t||r?1:t)},w.compact=function(e){return w.filter(e,w.identity)};var z=function(e,t,r,n){for(var i=[],a=0,o=n||0,s=k(e);s>o;o++){var u=e[o];if(E(u)&&(w.isArray(u)||w.isArguments(u))){t||(u=z(u,t,r));var l=0,c=u.length;for(i.length+=c;c>l;)i[a++]=u[l++]}else r||(i[a++]=u)}return i};w.flatten=function(e,t){return z(e,t,!1)},w.without=function(e){return w.difference(e,f.call(arguments,1))},w.uniq=w.unique=function(e,t,r,n){w.isBoolean(t)||(n=r,r=t,t=!1),null!=r&&(r=T(r,n));for(var i=[],a=[],o=0,s=k(e);s>o;o++){var u=e[o],l=r?r(u,o,e):u;t?(o&&a===l||i.push(u),a=l):r?w.contains(a,l)||(a.push(l),i.push(u)):w.contains(i,u)||i.push(u)
}return i},w.union=function(){return w.uniq(z(arguments,!0,!0))},w.intersection=function(e){for(var t=[],r=arguments.length,n=0,i=k(e);i>n;n++){var a=e[n];if(!w.contains(t,a)){for(var o=1;r>o&&w.contains(arguments[o],a);o++);o===r&&t.push(a)}}return t},w.difference=function(e){var t=z(arguments,!0,!0,1);return w.filter(e,function(e){return!w.contains(t,e)})},w.zip=function(){return w.unzip(arguments)},w.unzip=function(e){for(var t=e&&w.max(e,k).length||0,r=Array(t),n=0;t>n;n++)r[n]=w.pluck(e,n);return r},w.object=function(e,t){for(var r={},n=0,i=k(e);i>n;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},w.findIndex=n(1),w.findLastIndex=n(-1),w.sortedIndex=function(e,t,r,n){r=T(r,n,1);for(var i=r(t),a=0,o=k(e);o>a;){var s=Math.floor((a+o)/2);i>r(e[s])?a=s+1:o=s}return a},w.indexOf=i(1,w.findIndex,w.sortedIndex),w.lastIndexOf=i(-1,w.findLastIndex),w.range=function(e,t,r){null==t&&(t=e||0,e=0),r=r||1;for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),a=0;n>a;a++,e+=r)i[a]=e;return i};var M=function(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var a=A(e.prototype),o=e.apply(a,i);return w.isObject(o)?o:a};w.bind=function(e,t){if(y&&e.bind===y)return y.apply(e,f.call(arguments,1));if(!w.isFunction(e))throw new TypeError("Bind must be called on a function");var r=f.call(arguments,2),n=function(){return M(e,n,t,this,r.concat(f.call(arguments)))};return n},w.partial=function(e){var t=f.call(arguments,1),r=function(){for(var n=0,i=t.length,a=Array(i),o=0;i>o;o++)a[o]=t[o]===w?arguments[n++]:t[o];for(;arguments.length>n;)a.push(arguments[n++]);return M(e,r,this,this,a)};return r},w.bindAll=function(e){var t,r,n=arguments.length;if(1>=n)throw Error("bindAll must be passed function names");for(t=1;n>t;t++)r=arguments[t],e[r]=w.bind(e[r],e);return e},w.memoize=function(e,t){var r=function(n){var i=r.cache,a=""+(t?t.apply(this,arguments):n);return w.has(i,a)||(i[a]=e.apply(this,arguments)),i[a]};return r.cache={},r},w.delay=function(e,t){var r=f.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},w.defer=w.partial(w.delay,w,1),w.throttle=function(e,t,r){var n,i,a,o=null,s=0;r||(r={});var u=function(){s=r.leading===!1?0:w.now(),o=null,a=e.apply(n,i),o||(n=i=null)};return function(){var l=w.now();s||r.leading!==!1||(s=l);var c=t-(l-s);return n=this,i=arguments,0>=c||c>t?(o&&(clearTimeout(o),o=null),s=l,a=e.apply(n,i),o||(n=i=null)):o||r.trailing===!1||(o=setTimeout(u,c)),a}},w.debounce=function(e,t,r){var n,i,a,o,s,u=function(){var l=w.now()-o;t>l&&l>=0?n=setTimeout(u,t-l):(n=null,r||(s=e.apply(a,i),n||(a=i=null)))};return function(){a=this,i=arguments,o=w.now();var l=r&&!n;return n||(n=setTimeout(u,t)),l&&(s=e.apply(a,i),a=i=null),s}},w.wrap=function(e,t){return w.partial(t,e)},w.negate=function(e){return function(){return!e.apply(this,arguments)}},w.compose=function(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}},w.after=function(e,t){return function(){return 1>--e?t.apply(this,arguments):void 0}},w.before=function(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),1>=e&&(t=null),r}},w.once=w.partial(w.before,2);var I=!{toString:null}.propertyIsEnumerable("toString"),x=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];w.keys=function(e){if(!w.isObject(e))return[];if(p)return p(e);var t=[];for(var r in e)w.has(e,r)&&t.push(r);return I&&a(e,t),t},w.allKeys=function(e){if(!w.isObject(e))return[];var t=[];for(var r in e)t.push(r);return I&&a(e,t),t},w.values=function(e){for(var t=w.keys(e),r=t.length,n=Array(r),i=0;r>i;i++)n[i]=e[t[i]];return n},w.mapObject=function(e,t,r){t=T(t,r);for(var n,i=w.keys(e),a=i.length,o={},s=0;a>s;s++)n=i[s],o[n]=t(e[n],n,e);return o},w.pairs=function(e){for(var t=w.keys(e),r=t.length,n=Array(r),i=0;r>i;i++)n[i]=[t[i],e[t[i]]];return n},w.invert=function(e){for(var t={},r=w.keys(e),n=0,i=r.length;i>n;n++)t[e[r[n]]]=r[n];return t},w.functions=w.methods=function(e){var t=[];for(var r in e)w.isFunction(e[r])&&t.push(r);return t.sort()},w.extend=b(w.allKeys),w.extendOwn=w.assign=b(w.keys),w.findKey=function(e,t,r){t=T(t,r);for(var n,i=w.keys(e),a=0,o=i.length;o>a;a++)if(n=i[a],t(e[n],n,e))return n},w.pick=function(e,t,r){var n,i,a={},o=e;if(null==o)return a;w.isFunction(t)?(i=w.allKeys(o),n=S(t,r)):(i=z(arguments,!1,!1,1),n=function(e,t,r){return t in r},o=Object(o));for(var s=0,u=i.length;u>s;s++){var l=i[s],c=o[l];n(c,l,o)&&(a[l]=c)}return a},w.omit=function(e,t,r){if(w.isFunction(t))t=w.negate(t);else{var n=w.map(z(arguments,!1,!1,1),String);t=function(e,t){return!w.contains(n,t)}}return w.pick(e,t,r)},w.defaults=b(w.allKeys,!0),w.create=function(e,t){var r=A(e);return t&&w.extendOwn(r,t),r},w.clone=function(e){return w.isObject(e)?w.isArray(e)?e.slice():w.extend({},e):e},w.tap=function(e,t){return t(e),e},w.isMatch=function(e,t){var r=w.keys(t),n=r.length;if(null==e)return!n;for(var i=Object(e),a=0;n>a;a++){var o=r[a];if(t[o]!==i[o]||!(o in i))return!1}return!0};var P=function(e,t,r,n){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof w&&(e=e._wrapped),t instanceof w&&(t=t._wrapped);var i=d.call(e);if(i!==d.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var a="[object Array]"===i;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,s=t.constructor;if(o!==s&&!(w.isFunction(o)&&o instanceof o&&w.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],n=n||[];for(var u=r.length;u--;)if(r[u]===e)return n[u]===t;if(r.push(e),n.push(t),a){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!P(e[u],t[u],r,n))return!1}else{var l,c=w.keys(e);if(u=c.length,w.keys(t).length!==u)return!1;for(;u--;)if(l=c[u],!w.has(t,l)||!P(e[l],t[l],r,n))return!1}return r.pop(),n.pop(),!0};w.isEqual=function(e,t){return P(e,t)},w.isEmpty=function(e){return null==e?!0:E(e)&&(w.isArray(e)||w.isString(e)||w.isArguments(e))?0===e.length:0===w.keys(e).length},w.isElement=function(e){return!(!e||1!==e.nodeType)},w.isArray=g||function(e){return"[object Array]"===d.call(e)},w.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},w.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){w["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),w.isArguments(arguments)||(w.isArguments=function(e){return w.has(e,"callee")}),"object"!=typeof Int8Array&&(w.isFunction=function(e){return"function"==typeof e||!1}),w.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},w.isNaN=function(e){return w.isNumber(e)&&e!==+e},w.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===d.call(e)},w.isNull=function(e){return null===e},w.isUndefined=function(e){return void 0===e},w.has=function(e,t){return null!=e&&m.call(e,t)},w.noConflict=function(){return o._=s,this},w.identity=function(e){return e},w.constant=function(e){return function(){return e}},w.noop=function(){},w.property=F,w.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},w.matcher=w.matches=function(e){return e=w.extendOwn({},e),function(t){return w.isMatch(t,e)}},w.times=function(e,t,r){var n=Array(Math.max(0,e));t=S(t,r,1);for(var i=0;e>i;i++)n[i]=t(i);return n},w.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},w.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},j=w.invert(B),R=function(e){var t=function(t){return e[t]},r="(?:"+w.keys(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(i,t):e}};w.escape=R(B),w.unescape=R(j),w.result=function(e,t,r){var n=null==e?void 0:e[t];return void 0===n&&(n=r),w.isFunction(n)?n.call(e):n};var q=0;w.uniqueId=function(e){var t=++q+"";return e?e+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,Z=function(e){return"\\"+L[e]};w.template=function(e,t,r){!t&&r&&(t=r),t=w.defaults({},t,w.templateSettings);var n=RegExp([(t.escape||C).source,(t.interpolate||C).source,(t.evaluate||C).source].join("|")+"|$","g"),i=0,a="__p+='";e.replace(n,function(t,r,n,o,s){return a+=e.slice(i,s).replace(N,Z),i=s+t.length,r?a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?a+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=Function(t.variable||"obj","_",a)}catch(s){throw s.source=a,s}var u=function(e){return o.call(this,e,w)},l=t.variable||"obj";return u.source="function("+l+"){\n"+a+"}",u},w.chain=function(e){var t=w(e);return t._chain=!0,t};var U=function(e,t){return e._chain?w(t).chain():t};w.mixin=function(e){w.each(w.functions(e),function(t){var r=w[t]=e[t];w.prototype[t]=function(){var e=[this._wrapped];return h.apply(e,arguments),U(this,r.apply(w,e))}})},w.mixin(w),w.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=u[e];w.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0],U(this,r)}}),w.each(["concat","join","slice"],function(e){var t=u[e];w.prototype[e]=function(){return U(this,t.apply(this._wrapped,arguments))}}),w.prototype.value=function(){return this._wrapped},w.prototype.valueOf=w.prototype.toJSON=w.prototype.value,w.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return w})}).call(this)}),require.define("/lib/timezone-js.js",function(require,module,exports,__dirname,__filename,process,global){if(fleegix===void 0)var fleegix={};exports.timezoneJS===void 0&&(exports.timezoneJS={}),fs=require("fs"),path=require("path"),utils=require("../src/utils"),exports.timezoneJS.timezone=new function(){function invalidTZError(e){throw Error('Timezone "'+e+'" is either incorrect, or not loaded in the timezone registry.')}function builtInLoadZoneFile(e,t){if(fleegix.xhr===void 0)throw Error("Please use the Fleegix.js XHR module, or define your own transport mechanism for downloading zone files.");var r=_this.zoneFileBasePath+"/"+e;if(t.async)return fleegix.xhr.send({url:r,method:"get",handleSuccess:function(e){return _this.parseZones(e)&&"function"==typeof t.callback&&t.callback(),!0},handleErr:function(){throw Error('Error retrieving "'+r+'" zoneinfo file.')}});var n=fleegix.xhr.doReq({url:r,async:!1});return _this.parseZones(n)}function myLoadZoneFile(e){var t=path.join(_this.zoneFileBasePath,e)+".lzw";if(fs.readFileSync){t=path.join(__dirname,t);var r;if(!fs.existsSync(t))throw Error("Cannot find "+t+" from directory "+__dirname);return r=utils.lzwDecode(fs.readFileSync(t,"utf8")),_this.parseZones(r)}var n=require("files"),i="tz/"+e+".lzw";if(n[i])return _this.parseZones(utils.lzwDecode(n[i]));throw Error(i+" not found embedded in this package.")}function getRegionForTimezone(e){var t,r=regionExceptions[e];if(r)return r;if(reg=e.split("/")[0],t=regionMap[reg],!t){var n=_this.zones[e];if("string"==typeof n)return getRegionForTimezone(n);if(!_this.loadedZones.backward)return _this.loadZoneFile("backward",!0),getRegionForTimezone(e);invalidTZError(e)}return t}function parseTimeString(e){var t=/(\d+)(?::0*(\d*))?(?::0*(\d*))?([wsugz])?$/,r=e.match(t);return r[1]=parseInt(r[1],10),r[2]=r[2]?parseInt(r[2],10):0,r[3]=r[3]?parseInt(r[3],10):0,r}function getZone(e,t){for(var r=t,n=_this.zones[r];"string"==typeof n;)r=n,n=_this.zones[r];if(!n){if(!_this.loadedZones.backward)return _this.loadZoneFile("backward",!0),getZone(e,t);invalidTZError(r)}for(var i=0;n.length>i;i++){var a=n[i];if(!a[3])break;var o=parseInt(a[3],10),s=11,u=31;a[4]&&(s=monthMap[a[4].substr(0,3).toLowerCase()],u=parseInt(a[5],10));var r=a[6]?a[6]:"23:59:59";r=parseTimeString(r);var l=Date.UTC(o,s,u,r[1],r[2],r[3]);if(l>e.getTime())break}if(i==n.length)throw Error('No Zone found for "'+timezone+'" on '+e);return n[i]}function getBasicOffset(e){var t=parseTimeString(e[0]),r=0==e[0].indexOf("-")?-1:1;return t=r*1e3*(60*(60*t[1]+t[2])+t[3]),-t/60/1e3}function getRule(e,t,r){var n,i=t[1],a=getBasicOffset(t),o=function(e,t,r){var n=0;if("u"==t||"g"==t||"z"==t)n=0;else if("s"==t)n=a;else{if("w"!=t&&t)throw"unknown type "+t;n=getAdjustedOffset(a,r)}return n*=6e4,new Date(e.getTime()+n)},s=function(e,t){var r,n=e[0],i=e[1],a={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},s={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},u=parseTimeString(i[5]);if(isNaN(i[4])){var l,c;"last"===i[4].substr(0,4)?(r=new Date(Date.UTC(n,a[i[3]]+1,1,u[1]-24,u[2],u[3],0)),l=s[i[4].substr(4,3).toLowerCase()],c="<="):(r=new Date(Date.UTC(n,a[i[3]],i[4].substr(5),u[1],u[2],u[3],0)),l=s[i[4].substr(0,3).toLowerCase()],c=i[4].substr(3,2));var h=r.getUTCDay();">="===c?r.setUTCDate(r.getUTCDate()+(l-h+(h>l?7:0))):r.setUTCDate(r.getUTCDate()+(l-h-(l>h?7:0)))}else r=new Date(Date.UTC(n,a[i[3]],i[4],u[1],u[2],u[3],0));return t&&(r=o(r,u[4],t)),r},u=function(e,t){var r=[];for(var n in t)e>=Number(t[n][0])&&(Number(t[n][1])>=e||Number(t[n][0])===e&&"only"===t[n][1]||"max"===t[n][1])&&r.push([e,t[n]]);return r},l=function(e,t,n){return e.constructor!==Date?e=s(e,n):n&&(e=o(e,r?"u":"w",n)),t.constructor!==Date?t=s(t,n):n&&(t=o(t,r?"u":"w",n)),e=Number(e),t=Number(t),e-t},c=e.getUTCFullYear();n=u(c,_this.rules[i]),n.push(e),n.sort(l),2>n.indexOf(e)&&(n=n.concat(u(c-1,_this.rules[i])),n.sort(l));var h=n.indexOf(e);return h>1&&0>l(e,n[h-1],n[h-2][1])?n[h-2][1]:h>0&&n.length-1>h&&l(e,n[h+1],n[h-1][1])>0?n[h+1][1]:0===h?null:n[h-1][1]}function getAdjustedOffset(e,t){var r=t[6],n=parseTimeString(r),i=0==r.indexOf("-")?-1:1,a=i*1e3*(60*(60*n[1]+n[2])+n[3]);return a=a/60/1e3,a-=e,a=-Math.ceil(a)}function getAbbreviation(e,t){var r,n=e[2];if(n.indexOf("%s")>-1){var i;i=t?"-"==t[7]?"":t[7]:"S",r=n.replace("%s",i)}else if(n.indexOf("/")>-1){var a=parseTimeString(t[6]),o=a[1]||a[2]||a[3];r=n.split("/",2)[o?1:0]}else r=n;return r}var _this=this,monthMap={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},dayMap={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},regionMap={EST:"northamerica",MST:"northamerica",HST:"northamerica",EST5EDT:"northamerica",CST6CDT:"northamerica",MST7MDT:"northamerica",PST8PDT:"northamerica",America:"northamerica",Pacific:"australasia",Atlantic:"europe",Africa:"africa",Indian:"africa",Antarctica:"antarctica",Asia:"asia",Australia:"australasia",Europe:"europe",WET:"europe",CET:"europe",MET:"europe",EET:"europe"},regionExceptions={"Pacific/Honolulu":"northamerica","Atlantic/Bermuda":"northamerica","Atlantic/Cape_Verde":"africa","Atlantic/St_Helena":"africa","Indian/Kerguelen":"antarctica","Indian/Chagos":"asia","Indian/Maldives":"asia","Indian/Christmas":"australasia","Indian/Cocos":"australasia","America/Danmarkshavn":"europe","America/Scoresbysund":"europe","America/Godthab":"europe","America/Thule":"europe","Asia/Yekaterinburg":"europe","Asia/Omsk":"europe","Asia/Novosibirsk":"europe","Asia/Krasnoyarsk":"europe","Asia/Irkutsk":"europe","Asia/Yakutsk":"europe","Asia/Vladivostok":"europe","Asia/Sakhalin":"europe","Asia/Magadan":"europe","Asia/Kamchatka":"europe","Asia/Anadyr":"europe","Africa/Ceuta":"europe","America/Argentina/Buenos_Aires":"southamerica","America/Argentina/Cordoba":"southamerica","America/Argentina/Tucuman":"southamerica","America/Argentina/La_Rioja":"southamerica","America/Argentina/San_Juan":"southamerica","America/Argentina/Jujuy":"southamerica","America/Argentina/Catamarca":"southamerica","America/Argentina/Mendoza":"southamerica","America/Argentina/Rio_Gallegos":"southamerica","America/Argentina/Ushuaia":"southamerica","America/Aruba":"southamerica","America/La_Paz":"southamerica","America/Noronha":"southamerica","America/Belem":"southamerica","America/Fortaleza":"southamerica","America/Recife":"southamerica","America/Araguaina":"southamerica","America/Maceio":"southamerica","America/Bahia":"southamerica","America/Sao_Paulo":"southamerica","America/Campo_Grande":"southamerica","America/Cuiaba":"southamerica","America/Porto_Velho":"southamerica","America/Boa_Vista":"southamerica","America/Manaus":"southamerica","America/Eirunepe":"southamerica","America/Rio_Branco":"southamerica","America/Santiago":"southamerica","Pacific/Easter":"southamerica","America/Bogota":"southamerica","America/Curacao":"southamerica","America/Guayaquil":"southamerica","Pacific/Galapagos":"southamerica","Atlantic/Stanley":"southamerica","America/Cayenne":"southamerica","America/Guyana":"southamerica","America/Asuncion":"southamerica","America/Lima":"southamerica","Atlantic/South_Georgia":"southamerica","America/Paramaribo":"southamerica","America/Port_of_Spain":"southamerica","America/Montevideo":"southamerica","America/Caracas":"southamerica"};this.zoneFileBasePath,this.zoneFiles=["africa","antarctica","asia","australasia","backward","etcetera","europe","northamerica","pacificnew","southamerica"],this.loadingSchemes={PRELOAD_ALL:"preloadAll",LAZY_LOAD:"lazyLoad",MANUAL_LOAD:"manualLoad"},this.loadingScheme=this.loadingSchemes.PRELOAD_ALL,this.defaultZoneFile=this.loadingScheme==this.loadingSchemes.PRELOAD_ALL?this.zoneFiles:"northamerica",this.loadedZones={},this.zones={},this.rules={},this.init=function(e){var t={async:!0},r=this.defaultZoneFile;for(var n in e)t[n]=e[n];if("string"==typeof r)throw Error("in init def==string");var i;this.loadedZones.africa=!0,i=utils.lzwDecode(fs.readFileSync("files/tz/africa.lzw","utf8")),_this.parseZones(i),this.loadedZones.antarctica=!0,i=utils.lzwDecode(fs.readFileSync("files/tz/antarctica.lzw","utf8")),_this.parseZones(i),this.loadedZones.asia=!0,i=utils.lzwDecode(fs.readFileSync("files/tz/asia.lzw","utf8")),_this.parseZones(i),this.loadedZones.australasia=!0,i=utils.lzwDecode(fs.readFileSync("files/tz/australasia.lzw","utf8")),_this.parseZones(i),this.loadedZones.backward=!0,i=utils.lzwDecode(fs.readFileSync("files/tz/backward.lzw","utf8")),_this.parseZones(i),this.loadedZones.etcetera=!0,i=utils.lzwDecode(fs.readFileSync("files/tz/etcetera.lzw","utf8")),_this.parseZones(i),this.loadedZones.europe=!0,i=utils.lzwDecode(fs.readFileSync("files/tz/europe.lzw","utf8")),_this.parseZones(i),this.loadedZones.northamerica=!0,i=utils.lzwDecode(fs.readFileSync("files/tz/northamerica.lzw","utf8")),_this.parseZones(i),this.loadedZones.pacificnew=!0,i=utils.lzwDecode(fs.readFileSync("files/tz/pacificnew.lzw","utf8")),_this.parseZones(i),this.loadedZones.southamerica=!0,i=utils.lzwDecode(fs.readFileSync("files/tz/southamerica.lzw","utf8")),_this.parseZones(i)},this.loadZoneFile=function(e){throw Error("timezone-js is trying to load a timezone file that it does not have: "+e)},this.loadZoneJSONData=function(url,sync){var processData=function(data){data=eval("("+data+")");for(var z in data.zones)_this.zones[z]=data.zones[z];for(var r in data.rules)_this.rules[r]=data.rules[r]};if(sync){var data=fleegix.xhr.doGet(url);processData(data)}else fleegix.xhr.doGet(processData,url)},this.loadZoneDataFromObject=function(e){if(e){for(var t in e.zones)_this.zones[t]=e.zones[t];for(var r in e.rules)_this.rules[r]=e.rules[r]}},this.getAllZones=function(){var e=[];for(z in this.zones)e.push(z);return e.sort()},this.parseZones=function(e){for(var t=e.split("\n"),r=[],n="",i=null,a=null,o=0;t.length>o;o++)if(l=t[o],l.match(/^\s/)&&(l="Zone "+i+l),l=l.split("#")[0],l.length>3)switch(r=l.split(/\s+/),n=r.shift()){case"Zone":i=r.shift(),_this.zones[i]||(_this.zones[i]=[]),_this.zones[i].push(r);break;case"Rule":a=r.shift(),_this.rules[a]||(_this.rules[a]=[]),_this.rules[a].push(r);break;case"Link":if(_this.zones[r[1]])throw Error("Error with Link "+r[1]);_this.zones[r[1]]=r[0];break;case"Leap":break;default:}return!0},this.getTzInfo=function(e,t,r){if(this.loadingScheme==this.loadingSchemes.LAZY_LOAD){var n=getRegionForTimezone(t);if(!n)throw Error("Not a valid timezone ID.");this.loadedZones[n]||this.loadZoneFile(n,!0)}var i=getZone(e,t),a=getBasicOffset(i),o=getRule(e,i,r);o&&(a=getAdjustedOffset(a,o));var s=getAbbreviation(i,o);return{tzOffset:a,tzAbbr:s}}},exports.timezoneJS.parseISO=function(e){var t="^(?:([+-]?[0-9]{4,})(?:-([0-9]{2})(?:-([0-9]{2}))?)?)?(?:T(?:([0-9]{2})(?::([0-9]{2})(?::([0-9]{2})(?:\\.([0-9]{3}))?)?)?)?(Z|[-+][0-9]{2}:[0-9]{2})?)?$",r=e.match(t);if(r){var n={year:r[1]||0,month:r[2]||1,day:r[3]||1,hour:r[4]||0,minute:r[5]||0,second:r[6]||0,milli:r[7]||0,offset:r[8]||"Z"},i=Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.milli);if("Z"!==n.offset){if(r=n.offset.match("([-+][0-9]{2})(?::([0-9]{2}))?"),!r)return 0/0;var a=1e3*60*60*r[1]+1e3*60*(r[2]||0);i-=a}return new Date(i)}return null}}),require.define("fs",function(){}),require.define("/src/Timeline.js",function(e,t,r){(function(){var t,n,i,a,o,s=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};t=e("./Time").Time,a=e("./../lib/timezone-js.js").timezoneJS,o=e("./utils"),n=function(){function e(e){var r,n,i,a,s,u,l,c,h;if(this.memoizedTicks={},null!=e.endBefore&&(this.endBefore=e.endBefore,"PAST_LAST"!==this.endBefore&&("string"===o.type(this.endBefore)&&(this.endBefore=new t(this.endBefore)),this.granularity=this.endBefore.granularity)),null!=e.startOn&&(this.startOn=e.startOn,"BEFORE_FIRST"!==this.startOn&&("string"===o.type(this.startOn)&&(this.startOn=new t(this.startOn)),this.granularity=this.startOn.granularity)),null!=e.granularity&&(this.granularity=e.granularity,null!=this.startOn&&(this.startOn=this.startOn.inGranularity(this.granularity)),null!=this.endBefore&&(this.endBefore=this.endBefore.inGranularity(this.granularity))),!this.granularity)throw Error("Cannot determine granularity for Timeline.");for("BEFORE_FIRST"===this.startOn&&(this.startOn=new t(this.startOn,this.granularity)),"PAST_LAST"===this.endBefore&&this.endBefore===new t(this.endBefore,this.granularity),this.endBefore||(this.endBefore=new t("PAST_LAST",this.granularity)),this.startOn||(this.startOn=new t("BEFORE_FIRST",this.granularity)),this.limit=null!=e.limit?e.limit:o.MAX_INT,this.workDays=null!=e.workDays?e.workDays:null!=e.workdays?e.workdays:["Monday","Tuesday","Wednesday","Thursday","Friday"],"string"===o.type(this.workDays)&&(this.workDays=function(){var e,t,r,n;for(r=this.workDays.split(","),n=[],e=0,t=r.length;t>e;e++)h=r[e],n.push(o.trim(h));return n}.call(this)),this.holidays=null!=e.holidays?e.holidays:[],l=this.holidays,i=a=0,s=l.length;s>a;i=++a)n=l[i],"string"===o.type(n)&&(this.holidays[i]=new t(n).getSegmentsAsObject());this.workDayStartOn=null!=e.workDayStartOn?e.workDayStartOn:void 0,null!=this.workDayStartOn?(r=null!=this.workDayStartOn.hour?this.workDayStartOn.hour:0,u=null!=this.workDayStartOn.minute?this.workDayStartOn.minute:0,this.startOnWorkMinutes=60*r+u,0>this.startOnWorkMinutes&&(this.startOnWorkMinutes=0)):this.startOnWorkMinutes=0,this.workDayEndBefore=null!=e.workDayEndBefore?e.workDayEndBefore:void 0,null!=this.workDayEndBefore?(r=null!=this.workDayEndBefore.hour?this.workDayEndBefore.hour:24,u=null!=this.workDayEndBefore.minute?this.workDayEndBefore.minute:0,this.endBeforeWorkMinutes=60*r+u,this.endBeforeWorkMinutes>1440&&(this.endBeforeWorkMinutes=1440)):this.endBeforeWorkMinutes=1440,this.step=null!=e.step?e.step:null!=e.endBefore&&(null!=(c=this.startOn)?c.greaterThan(this.endBefore):void 0)?-1:null!=e.endBefore&&null==e.startOn&&null!=e.limit?-1:1,o.assert(null!=e.startOn&&null!=e.endBefore||null!=e.startOn&&null!=e.limit&&this.step>0||null!=e.endBefore&&null!=e.limit&&0>this.step,'Must provide two out of "startOn", "endBefore", or "limit" and the sign of step must match.')}return e.prototype.getIterator=function(e,t,r){return null==e&&(e="Time"),new i(this,e,t,r)},e.prototype.getAllRaw=function(e,t,r){var n,i;for(null==e&&(e="Time"),i=this.getIterator(e,t,r),n=[];i.hasNext();)n.push(i.next());return n},e.prototype.getAll=function(e,r,n){var i,a,s;return null==e&&(e="Time"),a={tickType:e},null!=r&&(a.tz=r),null!=n&&(a.childGranularity=n),i=JSON.stringify(a),s=this.memoizedTicks[i],null==s&&(s=this.getAllRaw(e,r,n),s.length>1&&(s[0]instanceof t&&s[0].greaterThan(s[1])||"string"===o.type(s[0])&&s[0]>s[1])&&s.reverse(),this.memoizedTicks[i]=s),s},e.prototype.ticksThatIntersect=function(e,r,n){var i,a,s,u,l,c,h;if(o.assert(this.limit===o.MAX_INT,"Cannot call `ticksThatIntersect()` on Timelines specified with `limit`."),u=[],"string"===o.type(e))if(o.assert("string"===o.type(r),"The type for startOn and endBefore must match."),s=/\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\d.\d\d\dZ/,o.assert(s.test(e),"startOn must be in form ####-##-##T##:##:##.###Z"),o.assert(s.test(r),"endBefore must be in form ####-##-##T##:##:##.###Z"),o.assert(null!=n,"Must specify parameter tz when submitting ISO string boundaries."),c=this.getAll("ISOString",n),c[0]>=r||e>c[c.length-1])u=[];else{for(a=0,h=c.length;h>a&&e>c[a];)a++;for(;h>a&&r>c[a];)u.push(c[a]),a++}else{if(!(e instanceof t))throw Error("startOn must be a String or a Time object.");if(o.assert(r instanceof t,"The type for startOn and endBefore must match."),e=e.inGranularity(this.granularity),r=r.inGranularity(this.granularity),this.endBefore.lessThan(this.startOn)?(l=this.endBefore,i=this.startOn):(l=this.startOn,i=this.endBefore),l.greaterThanOrEqual(r)||i.lessThan(e))u=[];else{for(c=this.getAll(),a=0,h=c.length;h>a&&c[a].lessThan(e);)a++;for(;h>a&&c[a].lessThan(r);)u.push(c[a]),a++}}return u},e.prototype.contains=function(e,r){var n,i,s;if(o.assert(this.limit===o.MAX_INT,"Cannot call `contains()` on Timelines specified with `limit`."),e instanceof t)return e.lessThan(this.endBefore)&&e.greaterThanOrEqual(this.startOn);switch(o.assert(null!=r||"date"!==o.type(e),"Timeline.contains() requires a second parameter (timezone) when the first parameter is a Date()"),o.type(e)){case"string":if(null==r)return s=new t(e),s.lessThan(this.endBefore)&&s.greaterThanOrEqual(this.startOn);s=a.parseISO(e);break;case"date":s=e.getTime();break;default:throw Error("Timeline.contains() requires that the first parameter be of type Time, String, or Date")}return i=this.startOn.getJSDate(r),n=this.endBefore.getJSDate(r),n>s&&s>=i},e}(),i=function(){function e(e,t,r,i){var a;this.tickType=null!=t?t:"Time",this.childGranularity=i,o.assert("Time"===(a=this.tickType)||"Timeline"===a||"Date"===a||"ISOString"===a,"tickType must be 'Time', 'Timeline', 'Date', or 'ISOString'. You provided "+this.tickType+"."),o.assert("Date"!==this.tickType||null!=r,"Must provide a tz (timezone) parameter when tickType is Date."),o.assert("ISOString"!==this.tickType||null!=r,"Must provide a tz (timezone) parameter when returning ISOStrings."),null==this.tz&&(this.tz=r),this.timeline=e instanceof n?e:new n(e),null==this.childGranularity&&(this.childGranularity=e.granularity),this.reset()}var r,i;return r=r===void 0?o.StopIteration:r,e.prototype.reset=function(){return this.timeline.step>0?this.current=new t(this.timeline.startOn):(this.current=new t(this.timeline.endBefore),this.current.decrement()),this.count=0,this._proceedToNextValid()},i=function(e,t,r){return e.lessThan(r)&&e.greaterThanOrEqual(t)},e.prototype.hasNext=function(){return i(this.current,this.timeline.startOn,this.timeline.endBefore)&&this.count<this.timeline.limit},e.prototype._shouldBeExcluded=function(){var e,t,r,n,i,a,u,l;if(this.current._isGranularityCoarserThanDay())return!1;if(e=this.current.inGranularity("day"),a=this.current.dowString(),0>s.call(this.timeline.workDays,a))return!0;for(u=this.timeline.holidays,n=0,i=u.length;i>n;n++)if(r=u[n],o.match(r,e))return!0;if("hour"===(l=this.timeline.granularity)||"minute"===l||" second"===l||"millisecond"===l)if(t=60*this.current.hour,null!=this.current.minute&&(t+=this.current.minute),this.timeline.startOnWorkMinutes<=this.timeline.endBeforeWorkMinutes){if(this.timeline.startOnWorkMinutes>t||t>=this.timeline.endBeforeWorkMinutes)return!0}else if(this.timeline.startOnWorkMinutes>=t&&t>this.timeline.endBeforeWorkMinutes)return!0;return!1},e.prototype._proceedToNextValid=function(){var e;for(e=[];this.hasNext()&&this._shouldBeExcluded();)this.timeline.step>0?e.push(this.current.increment()):e.push(this.current.decrement());return e},e.prototype.next=function(){var e,i,a,o,s,u;if(!this.hasNext())throw new r("Cannot call next() past end.");for(a=new t(this.current),this.count++,o=s=u=Math.abs(this.timeline.step);1>=u?1>=s:s>=1;o=1>=u?++s:--s)this.timeline.step>0?this.current.increment():this.current.decrement(),this._proceedToNextValid();switch(this.tickType){case"Time":return a;case"Date":return a.getJSDate(this.tz);case"ISOString":return a.getISOStringInTZ(this.tz);case"Timeline":return i={startOn:a.inGranularity(this.childGranularity),endBefore:this.current.inGranularity(this.childGranularity),workDays:this.timeline.workDays,holidays:this.timeline.holidays,workDayStartOn:this.timeline.workDayStartOn,workDayEndBefore:this.timeline.workDayEndBefore},e=new n(i);default:throw Error("You asked for tickType "+this.tickType+". Only 'Time', 'Date', 'ISOString', and 'Timeline' are allowed.")}},e}(),r.Timeline=n,r.TimelineIterator=i}).call(this)});